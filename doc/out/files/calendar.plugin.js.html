<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>calendar.plugin.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/CalendarEvents.html">CalendarEvents</a></li>
                                <li><a href="../classes/Header.html">Header</a></li>
                                <li><a href="../classes/Helpers.html">Helpers</a></li>
                                <li><a href="../classes/MonthCalendar.html">MonthCalendar</a></li>
                                <li><a href="../classes/VacationCalendar.html">VacationCalendar</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/Calendar.html">Calendar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: calendar.plugin.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Created by Marcela on 28. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
/**
 * Created by Marcela on 28. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * This provides helpers.
     *
     * @class Helpers
     */
    var Helpers = (function () {
        function Helpers() {
        }
        /**
         * Utility that creates new array according to specified values (&#x60;from&#x60; and &#x60;to&#x60;).
         * If there is the specified input array, the result will contain elements
         * from this array, otherwise there will be a sequence of integers in the range
         * of each of the given values.
         *
         * This is an __example__ of usage &#x60;ArrayRange&#x60; method
         *
         *     var array = [1,2,4,5,6,8,9,21,22,45],
         *         from = 2,
         *         to = 10;
         *
         *     Calendar.Helpers.ArrayRange(2,10,array);
         *     // =&gt; [2, 4, 5, 6, 8, 9]
         *
         *     // example of unsorted array
         *     Calendar.Helpers.ArrayRange(2,10,1,6,2,5,6,7,4,5]);
         *     // =&gt; [2, 4, 5, 6, 7]
         *
         *     // example without input array
         *     Calendar.Helpers.ArrayRange(2,10);
         *     // =&gt; [2, 3, 4, 5, 6, 7, 8, 9, 10]
         *
         *
         * @method ArrayRange
         * @static
         * @param {number} from - Start value
         * @param {number} to - End value
         * @param {Array&lt;number&gt;} [array] - Input array
         *
         * @return {Array&lt;number&gt;}
        */
        Helpers.ArrayRange = function (from, to, array) {
            var A = [], step = 1;
            if (Object.prototype.toString.call(array) === &#x27;[object Array]&#x27;) {
                while (from &lt;= to) {
                    if (!!~array.indexOf(from)) {
                        A.push(from);
                    }
                    from += step;
                }
            }
            else {
                while (from &lt;= to) {
                    A.push(from);
                    from += step;
                }
            }
            return A;
        };
        /**
         * Provides the correct order of start and end indexes
         *
         * @method ArrayIndexes
         * @static
         * @param {IArrayIndexes} indexes - Object with start and end value
         * @return {IArrayIndexes}
         */
        Helpers.ArrayIndexes = function (indexes) {
            if (indexes.start &lt;= indexes.end) {
                return indexes;
            }
            return {
                start: indexes.end,
                end: indexes.start
            };
        };
        /**
         * Capitalizes the first letter of the text.
         *
         * @method CapitalizeFirstLetter
         * @static
         * @param {string} text - Text
         * @return {string}
         */
        Helpers.CapitalizeFirstLetter = function (text) {
            return text.charAt(0).toUpperCase() + text.slice(1);
        };
        return Helpers;
    })();
    Calendar.Helpers = Helpers;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 29. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * Renders header of plugin. Contains actual year and navigation
     * to previous and next year.
     *
     * @class Header
     * @property {JQuery} element - Header DOM element
     * @property {number} year - Actual year
     */
    var Header = (function () {
        function Header(year) {
            this.year = year;
            this.element = this.render();
        }
        /**
         * Creates whole header elements.
         *
         * @method render
         * @return JQuery
         */
        Header.prototype.render = function () {
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;row calendar-header&quot;).append(this.renderHeader());
        };
        /**
         * Creates main header element and appends navigation buttons
         * and title.
         *
         * @method renderHeader
         * @return JQuery
         */
        Header.prototype.renderHeader = function () {
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;col-md-12&quot;).append($(&quot;&lt;div /&gt;&quot;).addClass(&quot;pull-left&quot;).append(this.renderButton(&quot;prev&quot;)).append(this.renderTitle()).append(this.renderButton(&quot;next&quot;)));
        };
        /**
         * Creates navigation button.
         *
         * @method renderButton
         * @param {string} direction - Direction (prev or next)
         * @return JQuery
         */
        Header.prototype.renderButton = function (direction) {
            var yearValue = direction === &quot;prev&quot; ? this.year - 1 : this.year + 1, iconClass = direction === &quot;prev&quot; ? &quot;fa fa-chevron-left&quot; : &quot;fa fa-chevron-right&quot;;
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;btn btn-default year-direction&quot;).attr(&quot;type&quot;, &quot;button&quot;).attr(&quot;name&quot;, &quot;year&quot;).attr(&quot;data-direction&quot;, direction).attr(&quot;value&quot;, yearValue).append($(&quot;&lt;span /&gt;&quot;).addClass(iconClass));
        };
        /**
         * Creates year title.
         *
         * @method renderTitle
         * @return JQuery
         */
        Header.prototype.renderTitle = function () {
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;actual-year&quot;).attr(&quot;data-year&quot;, this.year).append($(&quot;&lt;strong /&gt;&quot;).text(this.year));
        };
        return Header;
    })();
    Calendar.Header = Header;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 29. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;../typing/moment.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
///&lt;reference path=&quot;helpers.ts&quot; /&gt;
/*
* moment.locale(&quot;cs-cz&quot;)
*
* moment.months()
* [&quot;leden&quot;, &quot;únor&quot;, &quot;březen&quot;, &quot;duben&quot;, &quot;květen&quot;, &quot;červen&quot;, &quot;červenec&quot;, &quot;srpen&quot;, &quot;září&quot;, &quot;říjen&quot;, &quot;listopad&quot;, &quot;prosinec&quot;]
* [&quot;enero&quot;, &quot;febrero&quot;, &quot;marzo&quot;, &quot;abril&quot;, &quot;mayo&quot;, &quot;junio&quot;, &quot;julio&quot;, &quot;agosto&quot;, &quot;septiembre&quot;, &quot;octubre&quot;, &quot;noviembre&quot;, &quot;diciembre&quot;]
* [&quot;январь&quot;, &quot;февраль&quot;, &quot;март&quot;, &quot;апрель&quot;, &quot;май&quot;, &quot;июнь&quot;, &quot;июль&quot;, &quot;август&quot;, &quot;сентябрь&quot;, &quot;октябрь&quot;, &quot;ноябрь&quot;, &quot;декабрь&quot;]
*
* moment.weekdaysMin()
* [&quot;ne&quot;, &quot;po&quot;, &quot;út&quot;, &quot;st&quot;, &quot;čt&quot;, &quot;pá&quot;, &quot;so&quot;]
* [&quot;Do&quot;, &quot;Lu&quot;, &quot;Ma&quot;, &quot;Mi&quot;, &quot;Ju&quot;, &quot;Vi&quot;, &quot;Sá&quot;]
* [&quot;вс&quot;, &quot;пн&quot;, &quot;вт&quot;, &quot;ср&quot;, &quot;чт&quot;, &quot;пт&quot;, &quot;сб&quot;]
* */
var Calendar;
(function (Calendar) {
    /**
     * Provides rendering month calendars, marks specified events by
     * custom colors, displays tooltip for each event both personal and
     * to other users. Sets Monday as the first day of week.
     *
     * @class MonthCalendar
     * @param {ISettings} settings - Plugin settings
     * @param {number} year - Actual year of calendar
     * @property {JQuery} element - Month calendars DOM element
     * @property {ISettings} settings - Plugin settings
     * @property {number} year - Actual year of calendar
     * @property {Date} today - Javascript Date object
     * @property {Array&lt;string&gt;} months - Array of month names
     * @property {Array&lt;string&gt;} weekdays - Array of weekdays shortcuts
     */
    var MonthCalendar = (function () {
        function MonthCalendar(settings, year) {
            this.today = new Date();
            this.settings = settings;
            this.year = year;
            this.months = moment.months();
            this.weekdays = moment.weekdaysShort();
            // set Monday as first day of week
            var sunday = this.weekdays[0];
            this.weekdays.shift();
            this.weekdays.push(sunday);
            // capitalize first letter
            this.capitalize();
            this.element = this.templateCalendar();
        }
        /**
         * Capitalizes the first letter of the month and weekdays names.
         *
         * @method capitalize
         */
        MonthCalendar.prototype.capitalize = function () {
            this.months = this.months.map(function (item) { return Calendar.Helpers.CapitalizeFirstLetter(item); });
            this.weekdays = this.weekdays.map(function (item) { return Calendar.Helpers.CapitalizeFirstLetter(item); });
        };
        /**
         * Creates wrapper for month tables.
         *
         * @method templateCalendar
         * @return {JQuery}
         */
        MonthCalendar.prototype.templateCalendar = function () {
            var view = $(&quot;&lt;div /&gt;&quot;).addClass(&quot;row&quot;);
            for (var i = 0, length = this.months.length; i &lt; length; i++) {
                var monthElement = $(&quot;&lt;div /&gt;&quot;).addClass(&quot;col-md-3 col-sm-4&quot;);
                monthElement.append(this.templateTable(i)).appendTo(view);
            }
            return view;
        };
        /**
         * Creates table for month represented by month index,
         * marks weekdays and events.
         *
         * @method templateTable
         * @param {number} monthId - Month index 0 - 11
         * @return {JQuery}
         */
        MonthCalendar.prototype.templateTable = function (monthId) {
            var actualDate = new Date(this.year, monthId), weekDay = (actualDate.getDay() + 6) % 7, daysInMonth = moment(actualDate).daysInMonth(), displayDay = daysInMonth == 0; // set display first day in calendar if it is Monday
            // table
            var table = $(&quot;&lt;table /&gt;&quot;).addClass(&quot;calendar-table table-bordered&quot;).append($(&quot;&lt;thead /&gt;&quot;).append($(&quot;&lt;tr /&gt;&quot;).addClass(&quot;calendar-header-month&quot;).append($(&quot;&lt;th /&gt;&quot;).attr(&quot;colSpan&quot;, 7).text(this.months[monthId]))).append($(&quot;&lt;tr /&gt;&quot;).addClass(&quot;calendar-header-day&quot;))).append($(&quot;&lt;tbody /&gt;&quot;).addClass(&quot;calendar-body&quot;));
            // header
            var dayRow = table.find(&quot;.calendar-header-day&quot;);
            this.weekdays.forEach(function (item) { return dayRow.append($(&quot;&lt;th /&gt;&quot;).text(item)); });
            // body
            var calendarBody = table.find(&quot;.calendar-body&quot;);
            var index = 1;
            for (var i = 0; i &lt; 6; i++) {
                var row = $(&quot;&lt;tr /&gt;&quot;);
                for (var j = 0; j &lt; 7; j++) {
                    var cell = $(&quot;&lt;td /&gt;&quot;).addClass(&quot;cell&quot;);
                    if (i === 0 &amp;&amp; j &gt;= weekDay) {
                        displayDay = true;
                    }
                    if (displayDay) {
                        var cellDate = new Date(this.year, monthId, index), cellDateIndex = cellDate.getDay();
                        // set weekend
                        if (cellDateIndex === 6 || cellDateIndex === 0) {
                            cell.addClass(&quot;weekend&quot;);
                        }
                        // set today
                        if (moment(cellDate).format(&quot;YYYY-MM-DD&quot;) === moment(this.today).format(&quot;YYYY-MM-DD&quot;)) {
                            cell.addClass(&quot;css-today&quot;).addClass(&quot;today&quot;);
                        }
                        // set vacation
                        // TODO ============
                        // set date number
                        cell.attr(&quot;data-year-day&quot;, moment(cellDate).dayOfYear()).text(index);
                        // resolve month index
                        if (index &lt; daysInMonth) {
                            index++;
                        }
                        else {
                            index = 1;
                            displayDay = false;
                        }
                    }
                    row.append(cell);
                }
                calendarBody.append(row);
            }
            return table;
        };
        return MonthCalendar;
    })();
    Calendar.MonthCalendar = MonthCalendar;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 2. 5. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;../typing/moment.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
///&lt;reference path=&quot;helpers.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * Implements mouse event handlers and provides selected range
     * of days indexes and sets selected class.
     *
     * @class CalendarEvents
     * @param {JQuery} element - Calendar jquery element
     * @param {ISettings} settings - Plugin settings
     * @property {JQuery} element - Calendar jquery element
     * @property {ISettings} settings - Plugin settings
     * @property {IArrayIndexes} indexes - Object that persists start and end index
     * @property {number} year - Selected year
     */
    var CalendarEvents = (function () {
        function CalendarEvents(element, settings) {
            var _this = this;
            this.element = element;
            this.settings = settings;
            this.resetIndexes();
            this.element.on(&quot;mouseup mouseover mousedown&quot;, &quot;td.cell&quot;, function (e) {
                _this[e.type](e);
            });
        }
        /**
         * Sets selected year to local variable.
         *
         * @method setSelectedlYear
         * @param {number} year - Selected year
         */
        CalendarEvents.prototype.setSelectedlYear = function (year) {
            this.year = year;
        };
        /**
         * Implements mousedown event. Sets start index and adds selected class to actual cell.
         *
         * @method mousedown
         * @param {JQueryEventObject} e - Event handler object
         */
        CalendarEvents.prototype.mousedown = function (e) {
            if (!this.leftMousePressed(e))
                return;
            e.preventDefault();
            var cellElement = $(e.target).closest(&#x27;td&#x27;), index = cellElement.attr(&#x27;data-year-day&#x27;);
            if (!index)
                return;
            $(&#x27;td.cell&#x27;).removeClass(&#x27;selected-day&#x27;);
            this.indexes = { start: Number(index), end: Number(index) };
            cellElement.addClass(&#x27;selected-day&#x27;);
        };
        /**
         * Implements mouseover event. Sets end index, calculates range of selected cells
         * and adds selected class to all cells according to calculated range.
         *
         * @method mouseover
         * @param {JQueryEventObject} e - Event handler object
         */
        CalendarEvents.prototype.mouseover = function (e) {
            e.preventDefault();
            if (!this.indexes.start)
                return;
            var cellElement = $(e.target).closest(&#x27;td&#x27;), index = cellElement.attr(&#x27;data-year-day&#x27;);
            if (isNaN(Number(index)))
                return;
            this.indexes.end = Number(index);
            if (this.indexes.start !== this.indexes.end) {
                $(&#x27;td.cell&#x27;).removeClass(&#x27;selected-day&#x27;);
                var idx = Calendar.Helpers.ArrayIndexes(this.indexes), selectedRange = Calendar.Helpers.ArrayRange(idx.start, idx.end);
                selectedRange.forEach(function (item) {
                    var selector = &#x27;td.cell[data-year-day=&#x27; + item + &#x27;]&#x27;;
                    $(selector).addClass(&#x27;selected-day&#x27;);
                });
            }
        };
        /**
         * Implements mouseup event. Sets end index, calculates start date and end date
         * from indexes and call modal dialog. At the end resets start and end indexes.
         *
         * @method mouseup
         * @param {JQueryEventObject} e - Event handler object
         */
        CalendarEvents.prototype.mouseup = function (e) {
            e.preventDefault();
            if (!this.indexes.start || !this.indexes.end)
                return;
            var idx = Calendar.Helpers.ArrayIndexes(this.indexes);
            var startDate = new Date(moment([this.year]).dayOfYear(idx.start).format(&quot;YYYY-MM-DD&quot;));
            var endDate = new Date(moment([this.year]).dayOfYear(idx.end).format(&quot;YYYY-MM-DD&quot;));
            console.log(&quot;from &quot;, startDate, &quot; to &quot;, endDate);
            this.resetIndexes();
        };
        /**
         * Resolves left mouse pressing.
         *
         * @method leftMousePressed
         * @private
         * @param {JQueryEventObject} e - Event handler object
         */
        CalendarEvents.prototype.leftMousePressed = function (e) {
            var event = window.event;
            var button = e.which || event.button;
            return button === 1;
        };
        /**
         * Remove values from &#x60;this.index&#x60; property after &#x60;mouseup&#x60; event
         * to use for other selection.
         *
         * @method resetIndexes
         * @private
         */
        CalendarEvents.prototype.resetIndexes = function () {
            this.indexes = { start: null, end: null };
        };
        return CalendarEvents;
    })();
    Calendar.CalendarEvents = CalendarEvents;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 28. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
///&lt;reference path=&quot;header.ts&quot; /&gt;
///&lt;reference path=&quot;months.ts&quot; /&gt;
///&lt;reference path=&quot;events.ts&quot; /&gt;
/**
 * Vacation calendar plugin.
 *
 * @module Calendar
 */
var Calendar;
(function (Calendar) {
    /**
     * Provides the base plugin class and initializes all components.
     *
     * @class VacationCalendar
     * @param {JQuery} element - DOM element for plugin
     * @param {ISettings} options - Custom options
     * @property {JQuery} element - DOM element for plugin
     * @property {ISettings} settings - Default settings
     * @property {CalendarEvents} events - Calendar events
     * @property {number} year - Actual year of calendar
     */
    var VacationCalendar = (function () {
        function VacationCalendar(element, options) {
            var _this = this;
            this.settings = {
                events: [{
                    name: &quot;Default&quot;,
                    color: &quot;green&quot;
                }],
                editable: true
            };
            this.element = element;
            this.year = new Date().getFullYear();
            this.settings = $.extend(true, this.settings, options);
            if (this.settings.locale) {
                moment.locale(this.settings.locale);
            }
            this.events = new Calendar.CalendarEvents(this.element, this.settings);
            this.events.setSelectedlYear(this.year);
            this.element.on(&quot;click&quot;, &quot;.year-direction&quot;, function (e) { return _this.changeYear(e); });
        }
        /**
         * Initializes view with calendars.
         *
         * @method init
         */
        VacationCalendar.prototype.init = function () {
            //console.log(this.settings);
            this.element.empty();
            var header = new Calendar.Header(this.year), monthTables = new Calendar.MonthCalendar(this.settings, this.year);
            var wrapper = $(&quot;&lt;div /&gt;&quot;).addClass(&quot;calendar-wrapper&quot;).append(header.element).append(monthTables.element);
            wrapper.appendTo(this.element);
        };
        /**
         * Changes the year of calendar and calls rerendering calendar view
         *
         * @method changeYear
         * @param {JQueryEventObject} e - Button object handler
         */
        VacationCalendar.prototype.changeYear = function (e) {
            var direction = $(e.target).closest(&quot;.year-direction&quot;).attr(&quot;data-direction&quot;);
            this.year = direction === &quot;prev&quot; ? this.year - 1 : this.year + 1;
            this.init();
            this.events.setSelectedlYear(this.year);
        };
        return VacationCalendar;
    })();
    Calendar.VacationCalendar = VacationCalendar;
})(Calendar || (Calendar = {}));
(function ($) {
    $.fn.vacationCalendar = function () {
        var option = arguments[0], args = arguments;
        return this.each(function () {
            var $this = $(this), data = $this.data(&quot;jquery.vacation.calendar&quot;), options = $.extend({}, $.fn.vacationCalendar.defaults, $this.data(), typeof option === &#x27;object&#x27; &amp;&amp; option);
            if (!data) {
                $this.data(&quot;jquery.vacation.calendar&quot;, (data = new Calendar.VacationCalendar($this, options)));
            }
            if (typeof option === &#x27;string&#x27;) {
                data[option](args[1]);
            }
            else {
                data.init();
            }
        });
    };
    $.fn.vacationCalendar.defaults = {};
})(jQuery);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
