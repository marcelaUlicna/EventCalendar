<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>event-calendar.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Dialog.html">Dialog</a></li>
                                <li><a href="../classes/EventCalendar.html">EventCalendar</a></li>
                                <li><a href="../classes/Events.html">Events</a></li>
                                <li><a href="../classes/Header.html">Header</a></li>
                                <li><a href="../classes/Helpers.html">Helpers</a></li>
                                <li><a href="../classes/ModalTemplate.html">ModalTemplate</a></li>
                                <li><a href="../classes/MonthCalendar.html">MonthCalendar</a></li>
                                <li><a href="../classes/Popover.html">Popover</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/Calendar.html">Calendar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: event-calendar.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Created by Marcela on 28. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    (function (DialogResult) {
        DialogResult[DialogResult[&quot;Submit&quot;] = 0] = &quot;Submit&quot;;
        DialogResult[DialogResult[&quot;Delete&quot;] = 1] = &quot;Delete&quot;;
        DialogResult[DialogResult[&quot;Cancel&quot;] = 2] = &quot;Cancel&quot;;
    })(Calendar.DialogResult || (Calendar.DialogResult = {}));
    var DialogResult = Calendar.DialogResult;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 29. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * Renders header of plugin. Contains actual year and navigation
     * to previous and next year.
     *
     * @class Header
     * @constructor
     * @property {JQuery} element - Header DOM element
     * @property {number} year - Actual year
     */
    var Header = (function () {
        function Header(year) {
            this.year = year;
            this.element = this.render();
        }
        /**
         * Creates whole header elements.
         *
         * @method render
         * @return JQuery
         */
        Header.prototype.render = function () {
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;row calendar-header&quot;).append(this.renderHeader());
        };
        /**
         * Creates main header element and appends navigation buttons
         * and title.
         *
         * @method renderHeader
         * @return JQuery
         */
        Header.prototype.renderHeader = function () {
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;col-md-12&quot;).append($(&quot;&lt;div /&gt;&quot;).addClass(&quot;pull-left&quot;).append(this.renderButton(&quot;prev&quot;)).append(this.renderTitle()).append(this.renderButton(&quot;next&quot;)));
        };
        /**
         * Creates navigation button.
         *
         * @method renderButton
         * @param {string} direction - Direction (prev or next)
         * @return JQuery
         */
        Header.prototype.renderButton = function (direction) {
            var yearValue = direction === &quot;prev&quot; ? this.year - 1 : this.year + 1, iconClass = direction === &quot;prev&quot; ? &quot;fa fa-chevron-left&quot; : &quot;fa fa-chevron-right&quot;;
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;btn btn-default year-direction&quot;).attr(&quot;type&quot;, &quot;button&quot;).attr(&quot;name&quot;, &quot;year&quot;).attr(&quot;data-direction&quot;, direction).attr(&quot;value&quot;, yearValue).append($(&quot;&lt;span /&gt;&quot;).addClass(iconClass));
        };
        /**
         * Creates year title.
         *
         * @method renderTitle
         * @return JQuery
         */
        Header.prototype.renderTitle = function () {
            return $(&quot;&lt;div /&gt;&quot;).addClass(&quot;actual-year&quot;).attr(&quot;data-year&quot;, this.year).append($(&quot;&lt;strong /&gt;&quot;).text(this.year));
        };
        return Header;
    })();
    Calendar.Header = Header;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 28. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * This provides various helpers.
     *
     * @class Helpers
     */
    var Helpers = (function () {
        function Helpers() {
        }
        /**
         * Utility that creates new array according to specified values (&#x60;from&#x60; and &#x60;to&#x60;).
         * If there is the specified input array, the result will contain elements
         * from this array, otherwise there will be a sequence of integers in the range
         * of each of the given values.
         *
         * This is an __example__ of usage &#x60;ArrayRange&#x60; method
         *
         *     var array = [1, 2, 4, 5, 6, 8, 9, 21, 22, 45],
         *         from = 2,
         *         to = 10;
         *
         *     Calendar.Helpers.ArrayRange(2, 10, array);
         *     // =&gt; [2, 4, 5, 6, 8, 9]
         *
         *     // example of unsorted array
         *     Calendar.Helpers.ArrayRange(2, 10, [1, 6, 2, 5, 6, 7, 4, 5]);
         *     // =&gt; [2, 4, 5, 6, 7]
         *
         *     // example without input array
         *     Calendar.Helpers.ArrayRange(2, 10);
         *     // =&gt; [2, 3, 4, 5, 6, 7, 8, 9, 10]
         *
         *
         * @method ArrayRange
         * @static
         * @param {number} from - Start value
         * @param {number} to - End value
         * @param {Array&lt;number&gt;} [array] - Input array
         *
         * @return {Array&lt;number&gt;} - Array of integers
        */
        Helpers.ArrayRange = function (from, to, array) {
            var A = [], step = 1;
            if (Object.prototype.toString.call(array) === &#x27;[object Array]&#x27;) {
                while (from &lt;= to) {
                    if (!!~array.indexOf(from)) {
                        A.push(from);
                    }
                    from += step;
                }
            }
            else {
                while (from &lt;= to) {
                    A.push(from);
                    from += step;
                }
            }
            return A;
        };
        /**
         * Provides the correct order of start and end indexes
         *
         * @method ArrayIndexes
         * @static
         * @param {IArrayIndexes} indexes - Object with start and end value
         * @return {IArrayIndexes} - Correct start and end index
         */
        Helpers.ArrayIndexes = function (indexes) {
            if (indexes.start &lt;= indexes.end) {
                return indexes;
            }
            return {
                start: indexes.end,
                end: indexes.start
            };
        };
        /**
         * Capitalizes the first letter of the text.
         *
         * @method CapitalizeFirstLetter
         * @static
         * @param {string} text - Text
         * @return {string} - Text with capitalized first char
         */
        Helpers.CapitalizeFirstLetter = function (text) {
            return text.charAt(0).toUpperCase() + text.slice(1);
        };
        /**
         * Renders template - replaces placeholders in template with values from dictionary.
         *
         * @method RenderTemplate
         * @static
         * @param {string} template - Given template
         * @param {[key: string]: any} dict - Dictionary with keys and values
         * @return {string} - Template
         * */
        Helpers.RenderTemplate = function (template, dict) {
            return template.replace(/\{\{(.*?)\}\}/g, function (match, key) {
                var value = dict, keys = key.split(&quot;.&quot;);
                for (var i = 0, length = keys.length; i &lt; length; i++) {
                    if (typeof value === &quot;undefined&quot; || value === null) {
                        break;
                    }
                    value = value[keys[i]];
                }
                return typeof value === &quot;undefined&quot; ? &quot;&quot; : value;
            });
        };
        return Helpers;
    })();
    Calendar.Helpers = Helpers;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 29. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;../typing/moment.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
///&lt;reference path=&quot;helpers.ts&quot; /&gt;
/*
* moment.locale(&quot;cs-cz&quot;)
*
* moment.months()
* [&quot;leden&quot;, &quot;únor&quot;, &quot;březen&quot;, &quot;duben&quot;, &quot;květen&quot;, &quot;červen&quot;, &quot;červenec&quot;, &quot;srpen&quot;, &quot;září&quot;, &quot;říjen&quot;, &quot;listopad&quot;, &quot;prosinec&quot;]
* [&quot;enero&quot;, &quot;febrero&quot;, &quot;marzo&quot;, &quot;abril&quot;, &quot;mayo&quot;, &quot;junio&quot;, &quot;julio&quot;, &quot;agosto&quot;, &quot;septiembre&quot;, &quot;octubre&quot;, &quot;noviembre&quot;, &quot;diciembre&quot;]
* [&quot;январь&quot;, &quot;февраль&quot;, &quot;март&quot;, &quot;апрель&quot;, &quot;май&quot;, &quot;июнь&quot;, &quot;июль&quot;, &quot;август&quot;, &quot;сентябрь&quot;, &quot;октябрь&quot;, &quot;ноябрь&quot;, &quot;декабрь&quot;]
*
* moment.weekdaysMin()
* [&quot;ne&quot;, &quot;po&quot;, &quot;út&quot;, &quot;st&quot;, &quot;čt&quot;, &quot;pá&quot;, &quot;so&quot;]
* [&quot;Do&quot;, &quot;Lu&quot;, &quot;Ma&quot;, &quot;Mi&quot;, &quot;Ju&quot;, &quot;Vi&quot;, &quot;Sá&quot;]
* [&quot;вс&quot;, &quot;пн&quot;, &quot;вт&quot;, &quot;ср&quot;, &quot;чт&quot;, &quot;пт&quot;, &quot;сб&quot;]
* */
var Calendar;
(function (Calendar) {
    /**
     * Provides rendering month calendars, marks specified events by
     * custom colors, displays tooltip for each event both personal and
     * to other users. Sets Monday as the first day of week.
     *
     * @class MonthCalendar
     * @constructor
     * @param {ISettings} settings - Plugin settings
     * @param {number} year - Actual year of calendar
     * @property {JQuery} element - Month calendars DOM element
     * @property {ISettings} settings - Plugin settings
     * @property {number} year - Actual year of calendar
     * @property {Date} today - Javascript Date object
     * @property {Array&lt;string&gt;} months - Array of month names
     * @property {Array&lt;string&gt;} weekdays - Array of weekdays shortcuts
     */
    var MonthCalendar = (function () {
        function MonthCalendar(settings, year) {
            this.today = new Date();
            this.settings = settings;
            this.year = year;
            this.months = moment.months();
            this.weekdays = moment.weekdaysShort();
            // set Monday as first day of week
            var sunday = this.weekdays[0];
            this.weekdays.shift();
            this.weekdays.push(sunday);
            // capitalize first letter
            this.capitalize();
            this.element = this.templateCalendar();
        }
        /**
         * Capitalizes the first letter of the month and weekdays names.
         *
         * @method capitalize
         */
        MonthCalendar.prototype.capitalize = function () {
            this.months = this.months.map(function (item) { return Calendar.Helpers.CapitalizeFirstLetter(item); });
            this.weekdays = this.weekdays.map(function (item) { return Calendar.Helpers.CapitalizeFirstLetter(item); });
        };
        /**
         * Creates wrapper for month tables.
         *
         * @method templateCalendar
         * @return {JQuery}
         */
        MonthCalendar.prototype.templateCalendar = function () {
            var view = $(&quot;&lt;div /&gt;&quot;).addClass(&quot;row&quot;);
            for (var i = 0, length = this.months.length; i &lt; length; i++) {
                var monthElement = $(&quot;&lt;div /&gt;&quot;).addClass(&quot;col-md-3 col-sm-4&quot;);
                monthElement.append(this.templateTable(i)).appendTo(view);
            }
            return view;
        };
        /**
         * Creates table for month represented by month index,
         * marks weekdays and events.
         *
         * @method templateTable
         * @param {number} monthId - Month index 0 - 11
         * @return {JQuery}
         */
        MonthCalendar.prototype.templateTable = function (monthId) {
            var actualDate = new Date(this.year, monthId), weekDay = (actualDate.getDay() + 6) % 7, daysInMonth = moment(actualDate).daysInMonth(), displayDay = daysInMonth == 0; // set display first day in calendar if it is Monday
            // table
            var table = $(&quot;&lt;table /&gt;&quot;).addClass(&quot;calendar-table table-bordered&quot;).append($(&quot;&lt;thead /&gt;&quot;).append($(&quot;&lt;tr /&gt;&quot;).addClass(&quot;calendar-header-month&quot;).append($(&quot;&lt;th /&gt;&quot;).attr(&quot;colSpan&quot;, 7).text(this.months[monthId]))).append($(&quot;&lt;tr /&gt;&quot;).addClass(&quot;calendar-header-day&quot;))).append($(&quot;&lt;tbody /&gt;&quot;).addClass(&quot;calendar-body&quot;));
            // header
            var dayRow = table.find(&quot;.calendar-header-day&quot;);
            this.weekdays.forEach(function (item) { return dayRow.append($(&quot;&lt;th /&gt;&quot;).text(item)); });
            // body
            var calendarBody = table.find(&quot;.calendar-body&quot;);
            var index = 1;
            for (var i = 0; i &lt; 6; i++) {
                var row = $(&quot;&lt;tr /&gt;&quot;);
                for (var j = 0; j &lt; 7; j++) {
                    var cell = $(&quot;&lt;td /&gt;&quot;).addClass(&quot;cell&quot;);
                    if (i === 0 &amp;&amp; j &gt;= weekDay) {
                        displayDay = true;
                    }
                    if (displayDay) {
                        var cellDate = new Date(this.year, monthId, index), cellDateIndex = cellDate.getDay();
                        // set weekend
                        if (cellDateIndex === 6 || cellDateIndex === 0) {
                            cell.addClass(&quot;weekend&quot;);
                        }
                        // set today
                        if (moment(cellDate).format(&quot;YYYY-MM-DD&quot;) === moment(this.today).format(&quot;YYYY-MM-DD&quot;)) {
                            cell.addClass(&quot;css-today&quot;).addClass(&quot;today&quot;);
                        }
                        // set vacation
                        // TODO ============
                        // set date number
                        cell.attr(&quot;data-year-day&quot;, moment(cellDate).dayOfYear()).text(index);
                        // resolve month index
                        if (index &lt; daysInMonth) {
                            index++;
                        }
                        else {
                            index = 1;
                            displayDay = false;
                        }
                    }
                    row.append(cell);
                }
                calendarBody.append(row);
            }
            return table;
        };
        return MonthCalendar;
    })();
    Calendar.MonthCalendar = MonthCalendar;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 5. 5. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;../typing/bootstrap.d.ts&quot; /&gt;
///&lt;reference path=&quot;../typing/moment.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
///&lt;reference path=&quot;helpers&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * Implements modal dialog which contains selected start and end date,
     * component with events to be selected and inputs where user can type
     * some message for other person and/or note for himself. There is available
     * both Submit and Delete button and the cross for closing dialog without
     * applying any changes.
     *
     * @class Dialog
     * @constructor
     * @param {IModalDialog} dialogSettings - Modal dialog settings
     * @property {IModalDialog} dialogSettings - Modal dialog settings
     * @property {[key: string]: any} templateDictionary - Dictionary of placeholders and values necessary for rendering template
     * @property {JQuery} modal - Dialog element
     * @property {DialogResult} [dialogResult=DialogResult.Cancel] - Result of dialog event
     */
    var Dialog = (function () {
        function Dialog(dialogSettings) {
            this.dialogResult = 2 /* Cancel */;
            this.dialogSettings = dialogSettings;
            this.dialogSettings.selectedEvent = this.dialogSettings.events[0].name;
            this.templateDictionary = this.getDictionary();
        }
        /**
         * Fills &#x60;templateDictionary&#x60; with keys and its values.
         *
         * @method getDictionary
         * @private
         * @return {any} - Returns dictionary template
         */
        Dialog.prototype.getDictionary = function () {
            return {
                &quot;title&quot;: &quot;Modal title&quot;,
                &quot;start&quot;: moment(this.dialogSettings.start).format(&quot;LL&quot;),
                &quot;end&quot;: moment(this.dialogSettings.end).format(&quot;LL&quot;),
                &quot;dropdown&quot;: Calendar.ModalTemplate.dropdownTemplate(this.dialogSettings)
            };
        };
        /**
         * Renders modal dialog and binds all necessary events. After closing modal dialog
         * it is removed from DOM.
         *
         * @method show
         * @returns {JQueryPromise&lt;DialogResult&gt;} - Returns promise from modal dialog with dialog result
         */
        Dialog.prototype.show = function () {
            var _this = this;
            var deferred = $.Deferred();
            this.modal = $(Calendar.Helpers.RenderTemplate(Calendar.ModalTemplate.template(), this.templateDictionary)).appendTo($(&quot;body&quot;));
            this.modal.modal();
            this.modal.on(&quot;click&quot;, &quot;.modal-body .dropdown-menu li&quot;, function (e) { return _this.selectChange(e); });
            this.modal.on(&quot;change&quot;, &quot;input&quot;, function (e) { return _this.messageChanged(e); });
            this.modal.on(&quot;click&quot;, &quot;.modal-body .btn-action&quot;, function (e) { return _this.click(e); });
            this.modal.on(&quot;keyup&quot;, function (e) { return _this.modalKeyup(e); });
            this.modal.on(&quot;hidden.bs.modal&quot;, function () {
                _this.modal.remove();
                deferred.resolve(_this.dialogResult);
            });
            return deferred.promise();
        };
        /**
         * Resolves button click from dialog and calls appropriate method.
         *
         * @method click
         * @param {JQueryEventObject} e - Button object handler
         */
        Dialog.prototype.click = function (e) {
            var action = $(e.target).attr(&quot;id&quot;);
            this[action](e);
        };
        /**
         * jQuery keyup() event for enter and escape key.
         * Enter key confirms dialog and escape key closes dialog
         * without changes.
         *
         * @method modalKeyup
         * @param {JQueryEventObject} e - Key event handler
         * */
        Dialog.prototype.modalKeyup = function (e) {
            var key = e.keyCode || e.which;
            if (key === 13) {
                this.btnSubmit(e);
            }
            else if (key === 27) {
                this.btnClose(e);
            }
        };
        /**
         * Sets dialogResult to &#x60;DialogResult.Submit&#x60;.
         *
         * @method btnSubmit
         * @param {JQueryEventObject} e - Button object handler
         */
        Dialog.prototype.btnSubmit = function (e) {
            this.dialogResult = 0 /* Submit */;
            this.close();
        };
        /**
         * Sets dialogResult to &#x60;DialogResult.Delete&#x60;.
         *
         * @method btnDelete
         * @param {JQueryEventObject} e - Button object handler
         */
        Dialog.prototype.btnDelete = function (e) {
            this.dialogResult = 1 /* Delete */;
            this.close();
        };
        /**
         * Sets dialogResult to &#x60;DialogResult.Cancel&#x60;.
         *
         * @method btnClose
         * @param {JQueryEventObject} e - Button object handler
         */
        Dialog.prototype.btnClose = function (e) {
            this.dialogResult = 2 /* Cancel */;
            this.close();
        };
        /**
         * Closes modal dialog.
         *
         * @method close
         */
        Dialog.prototype.close = function () {
            this.modal.modal(&quot;hide&quot;);
        };
        /**
         * Applies changes after selecting some event from list component,
         * saves selected item to &#x60;dialogSettings&#x60; property and
         * sets selected item to main button to reflect actual item.
         *
         * @method selectChange
         * @param {JQueryEventObject} e - Selected item event handler
         */
        Dialog.prototype.selectChange = function (e) {
            var li = $(e.target).closest(&quot;li&quot;);
            this.dialogSettings.selectedEvent = li.attr(&quot;data-value&quot;);
            var html = li.find(&quot;a&quot;).html(), faIndex = html.indexOf(&quot;&lt;i class&quot;), htmlWithCaret = html.slice(0, faIndex) + &quot; &lt;span class=&#x27;caret pull-right&#x27;&gt;&lt;/span&gt;&quot; + html.slice(faIndex);
            $(&quot;.calendar-modal .dropdown-toggle&quot;).html(htmlWithCaret);
        };
        /**
         * Saves input text to &#x60;dialogSettings&#x60; property.
         *
         * @method messageChanged
         * @param {JQueryEventObject} e - Input event handler
         */
        Dialog.prototype.messageChanged = function (e) {
            var input = $(e.target);
            if (input.attr(&quot;name&quot;) === &quot;userMessage&quot;) {
                this.dialogSettings.message = input.val();
            }
            else {
                this.dialogSettings.personalNote = input.val();
            }
        };
        return Dialog;
    })();
    Calendar.Dialog = Dialog;
    /**
     * Static class which contains templates for modal dialog
     *
     * @class ModalTemplate
     * @static
     */
    var ModalTemplate = (function () {
        function ModalTemplate() {
        }
        /**
         * Whole modal dialog html template.
         *
         * @method template
         * @static
         * @return {string} - Returns template
         */
        ModalTemplate.template = function () {
            return [
                &quot;&lt;div class=&#x27;modal calendar-modal&#x27; tabindex=&#x27;-1&#x27; role=&#x27;dialog&#x27; aria-hidden=&#x27;true&#x27;&gt;&quot;,
                &quot;  &lt;div class=&#x27;modal-dialog modal-sm&#x27;&gt;&quot;,
                &quot;    &lt;div class=&#x27;modal-content&#x27;&gt;&quot;,
                &quot;       &lt;div class=&#x27;modal-header&#x27;  style=&#x27;border-bottom: none;&#x27;&gt;&quot;,
                &quot;           &lt;button type=&#x27;button&#x27; class=&#x27;close&#x27; data-dismiss=&#x27;modal&#x27; aria-label=&#x27;Close&#x27;&gt;&lt;span aria-hidden=&#x27;true&#x27;&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;&quot;,
                &quot;       &lt;/div&gt;&quot;,
                &quot;       &lt;div class=&#x27;modal-body&#x27; style=&#x27;padding-top: 0;&#x27;&gt;&quot;,
                &quot;           &lt;div class=&#x27;row&#x27; style=&#x27;padding-bottom: 15px;&#x27;&gt;&quot;,
                &quot;               &lt;div class=&#x27;col-md-12&#x27;&gt;&lt;i class=&#x27;fa fa-calendar-o&#x27;&gt;&lt;/i&gt; {{start}}&lt;/div&gt;&quot;,
                &quot;               &lt;div class=&#x27;col-md-12&#x27;&gt;&lt;i class=&#x27;fa fa-calendar-o&#x27;&gt;&lt;/i&gt; {{end}}&lt;/div&gt;&quot;,
                &quot;           &lt;/div&gt;&quot;,
                &quot;           &lt;div class=&#x27;row&#x27; style=&#x27;padding-bottom: 15px;&#x27;&gt;&quot;,
                &quot;               &lt;div class=&#x27;col-md-12&#x27;&gt;{{dropdown}}&lt;/div&gt;&quot;,
                &quot;           &lt;/div&gt;&quot;,
                &quot;           &lt;form&gt;&quot;,
                &quot;               &lt;div class=&#x27;form-group&#x27;&gt;&quot;,
                &quot;                   &lt;div&gt;Information (users will see this message)&lt;/div&gt;&quot;,
                &quot;                   &lt;input type=&#x27;text&#x27; name=&#x27;userMessage&#x27; class=&#x27;form-control&#x27;&gt;&quot;,
                &quot;               &lt;/div&gt;&quot;,
                &quot;               &lt;div class=&#x27;form-group&#x27;&gt;&quot;,
                &quot;                   &lt;div&gt;Notes (only you will see this message)&lt;/div&gt;&quot;,
                &quot;                   &lt;input type=&#x27;text&#x27; name=&#x27;privateNote&#x27; class=&#x27;form-control&#x27;&gt;&quot;,
                &quot;               &lt;/div&gt;&quot;,
                &quot;           &lt;/form&gt;&quot;,
                &quot;           &lt;div class=&#x27;row&#x27;&gt;&quot;,
                &quot;               &lt;div class=&#x27;col-md-12&#x27;&gt;&quot;,
                &quot;                   &lt;button type=&#x27;button&#x27; id=&#x27;btnDelete&#x27; class=&#x27;btn btn-default pull-left btn-action&#x27;&gt;Delete&lt;/button&gt;&quot;,
                &quot;                   &lt;button type=&#x27;button&#x27; id=&#x27;btnSubmit&#x27; class=&#x27;btn btn-primary pull-right btn-action&#x27;&gt;Submit&lt;/button&gt;&quot;,
                &quot;               &lt;/div&gt;&quot;,
                &quot;           &lt;/div&gt;&quot;,
                &quot;       &lt;/div&gt;&quot;,
                &quot;    &lt;/div&gt;&quot;,
                &quot;  &lt;/div&gt;&quot;,
                &quot;&lt;/div&gt;&quot;
            ].join(&quot;\n&quot;);
        };
        /**
         * Template for dropdown component with events.
         *
         * @method dropdownTemplate
         * @static
         * @param {IModalDialog} dialogSettings - Modal dialog settings
         * @return {string} - Returns partial template
         */
        ModalTemplate.dropdownTemplate = function (dialogSettings) {
            var _this = this;
            var firstEvent = dialogSettings.events[0];
            var dropdownlist = dialogSettings.events.map(function (item) {
                return Calendar.Helpers.RenderTemplate(_this.dropdownList, {
                    &quot;value&quot;: item.name,
                    &quot;backgroundColor&quot;: item.backgroundColor || dialogSettings.defaultBgColor
                });
            });
            return Calendar.Helpers.RenderTemplate(this.dropdownButton, {
                &quot;value&quot;: firstEvent.name,
                &quot;backgroundColor&quot;: firstEvent.backgroundColor || dialogSettings.defaultBgColor,
                &quot;dropdownlist&quot;: dropdownlist.join(&quot;&quot;)
            });
        };
        ModalTemplate.dropdownButton = [
            &quot;&lt;div class=&#x27;btn-group&#x27; role=&#x27;group&#x27;&gt;&quot;,
            &quot;   &lt;button type=&#x27;button&#x27; class=&#x27;btn btn-default dropdown-toggle&#x27; data-toggle=&#x27;dropdown&#x27; aria-expanded=&#x27;false&#x27;&gt;&quot;,
            &quot;       {{value}}&quot;,
            &quot;       &lt;span class=&#x27;caret pull-right&#x27;&gt;&lt;/span&gt;&quot;,
            &quot;       &lt;i class=&#x27;fa fa-square pull-right&#x27; style=&#x27;color: {{backgroundColor}}&#x27;&gt;&lt;/i&gt;&quot;,
            &quot;   &lt;/button&gt;&quot;,
            &quot;   &lt;ul class=&#x27;dropdown-menu&#x27; role=&#x27;menu&#x27;&gt;&quot;,
            &quot;       {{dropdownlist}}&quot;,
            &quot;   &lt;/ul&gt;&quot;,
            &quot;&lt;/div&gt;&quot;
        ].join(&quot;\n&quot;);
        ModalTemplate.dropdownList = &quot;&lt;li data-value=&#x27;{{value}}&#x27;&gt;&lt;a href=&#x27;#&#x27;&gt;{{value}}&lt;i class=&#x27;fa fa-square pull-right&#x27; style=&#x27;color: {{backgroundColor}};&#x27;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;&quot;;
        return ModalTemplate;
    })();
    Calendar.ModalTemplate = ModalTemplate;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 9. 5. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;../typing/bootstrap.d.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * Implements bootstrap popover for each cell with any event.
     * Shows both message for other people and personal note if it is available.
     * It is triggered by hover.
     *
     * @class Popover
     * @static
     */
    var Popover = (function () {
        function Popover() {
        }
        /**
         * Initializes popover for cell element.
         *
         * @method popover
         * @static
         * @param {JQuery} cell - Cell element to apply popover
         * @param {string} [message] - Message text
         * @param {string} [note] - Note text for creator
         */
        Popover.popover = function (cell, message, note) {
            var _this = this;
            cell.popover({
                container: &#x27;body&#x27;,
                html: true,
                placement: &#x27;top&#x27;,
                trigger: &#x27;hover&#x27;,
                content: function () {
                    return _this.template(message, note);
                }
            });
        };
        /**
         * Popover content.
         *
         * @method template
         * @static
         * @param {string} [message] - Message text
         * @param {string} [note] - Note text for creator
         * @return {string} - Template
         */
        Popover.template = function (message, note) {
            var messageTmp = message &amp;&amp; message.length ? this.messageTmp.replace(&quot;{{message}}&quot;, message) : &quot;&quot;, noteTmp = note &amp;&amp; note.length ? this.noteTmp.replace(&quot;{{note}}&quot;, note) : &quot;&quot;;
            return &quot;&lt;div&gt;&quot; + messageTmp + noteTmp + &quot;&lt;/div&gt;&quot;;
        };
        Popover.messageTmp = &quot;&lt;div&gt;{{message}}&lt;/div&gt;&quot;;
        Popover.noteTmp = &quot;&lt;div class=&#x27;note&#x27;&gt;{{note}}&lt;/div&gt;&quot;;
        return Popover;
    })();
    Calendar.Popover = Popover;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 2. 5. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;../typing/moment.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
///&lt;reference path=&quot;helpers.ts&quot; /&gt;
///&lt;reference path=&quot;modal.ts&quot; /&gt;
///&lt;reference path=&quot;popover.ts&quot; /&gt;
var Calendar;
(function (Calendar) {
    /**
     * Implements mouse event handlers and provides selected range
     * of days indexes and sets selected class. Show modal dialog with
     * custom setting when user can select one event and type message
     * for other person and/or note to himself. After receiving response from
     * modal dialog there is made design changes in calendar and calls
     * method which provides custom server side request.
     *
     * @class Events
     * @constructor
     * @param {JQuery} element - Calendar jquery element
     * @param {ISettings} settings - Plugin settings
     * @property {JQuery} element - Calendar jquery element
     * @property {ISettings} settings - Plugin settings
     * @property {IArrayIndexes} indexes - Object that persists start and end index
     * @property {number} year - Selected year
     */
    var Events = (function () {
        function Events(element, settings) {
            var _this = this;
            this.dialogSettings = {
                start: null,
                end: null,
                events: [],
                selectedEvent: &quot;&quot;,
                defaultBgColor: &quot;green&quot;,
                defaultColor: &quot;white&quot;
            };
            this.element = element;
            this.settings = settings;
            this.dialogSettings.events = this.settings.events;
            this.dialogSettings.selectedEvent = this.settings.events[0].name;
            this.resetIndexes();
            if (this.settings.editable) {
                this.element.on(&quot;mouseup mouseover mousedown&quot;, &quot;td.cell&quot;, function (e) {
                    _this[e.type](e);
                });
            }
        }
        /**
         * Sets selected year to local variable.
         *
         * @method setSelectedlYear
         * @param {number} year - Selected year
         */
        Events.prototype.setSelectedlYear = function (year) {
            this.year = year;
        };
        /**
         * Implements mousedown event. Sets start index and adds selected class to actual cell.
         *
         * @method mousedown
         * @param {JQueryEventObject} e - Event handler object
         */
        Events.prototype.mousedown = function (e) {
            if (!this.leftMousePressed(e))
                return;
            e.preventDefault();
            var cellElement = $(e.target).closest(&#x27;td&#x27;), index = cellElement.attr(&#x27;data-year-day&#x27;);
            if (!index)
                return;
            $(&#x27;td.cell&#x27;).removeClass(&#x27;selected-day&#x27;);
            this.indexes = { start: Number(index), end: Number(index) };
            cellElement.addClass(&#x27;selected-day&#x27;);
        };
        /**
         * Implements mouseover event. Sets end index, calculates range of selected cells
         * and adds selected class to all cells according to calculated range.
         *
         * @method mouseover
         * @param {JQueryEventObject} e - Event handler object
         */
        Events.prototype.mouseover = function (e) {
            e.preventDefault();
            if (!this.indexes.start)
                return;
            var cellElement = $(e.target).closest(&#x27;td&#x27;), index = cellElement.attr(&#x27;data-year-day&#x27;);
            if (isNaN(Number(index)))
                return;
            this.indexes.end = Number(index);
            if (this.indexes.start !== this.indexes.end) {
                $(&#x27;td.cell&#x27;).removeClass(&#x27;selected-day&#x27;);
                var idx = Calendar.Helpers.ArrayIndexes(this.indexes), selectedRange = Calendar.Helpers.ArrayRange(idx.start, idx.end);
                selectedRange.forEach(function (item) {
                    var selector = &#x27;td.cell[data-year-day=&#x27; + item + &#x27;]&#x27;;
                    $(selector).addClass(&#x27;selected-day&#x27;);
                });
            }
        };
        /**
         * Implements mouseup event. Sets end index, calculates start and end dates
         * from indexes and calls modal dialog to enter personal event. At the end resets start and end indexes.
         *
         * @method mouseup
         * @param {JQueryEventObject} e - Event handler object
         */
        Events.prototype.mouseup = function (e) {
            e.preventDefault();
            if (!this.indexes.start || !this.indexes.end)
                return;
            var idx = Calendar.Helpers.ArrayIndexes(this.indexes);
            this.dialogSettings.start = moment([this.year]).dayOfYear(idx.start);
            this.dialogSettings.end = moment([this.year]).dayOfYear(idx.end);
            this.showModal();
        };
        /**
         * Displays modal dialog with settings and action and handlers events &quot;Submit&quot; or &quot;Delete&quot;
         * based on clicked button. After that calls removing selection styling.
         *
         * @method showModal
         */
        Events.prototype.showModal = function () {
            var _this = this;
            var modal = new Calendar.Dialog(this.dialogSettings);
            modal.show().then(function (result) {
                if (result === 0 /* Submit */) {
                    _this.dialogSettings = modal.dialogSettings;
                    _this.submitChanges();
                }
                else if (result === 1 /* Delete */) {
                    _this.deleteItems();
                }
                _this.removeSelection();
            });
        };
        /**
         * Removes class &#x60;selected-day&#x60; used for marking selection and calls &#x60;resetIndexes()&#x60;.
         *
         * @method removeSelection
         *
         */
        Events.prototype.removeSelection = function () {
            this.element.find(&quot;td&quot;).removeClass(&quot;selected-day&quot;);
            this.resetIndexes();
            this.dialogSettings.personalNote = null;
            this.dialogSettings.message = null;
            this.dialogSettings.selectedEvent = this.settings.events[0].name;
        };
        /**
         * Submit action. Applies css style for selected event on client side.
         * Calls &#x60;TODO: Submit server implementation&#x60; for server side implementation.
         *
         * @method submitChanges
         */
        Events.prototype.submitChanges = function () {
            // user implementation
            this.applyEventFormat();
        };
        /**
         * Delete action. Remove css style on client side.
         * Calls &#x60;TODO: Delete server implementation&#x60; for server side implementation.
         *
         * @method deleteItems
         */
        Events.prototype.deleteItems = function () {
            // user implementation
            this.removeEventFormat();
        };
        /**
         * Sets css styling to each cell in range of selected indexes according to
         * selected event and its properties (background color, color), sets title
         * if any of messages is typed. Adds class &#x60;event-day&#x60; to each cell and initializes
         * popover with messages.
         *
         * @method applyEventFormat
         */
        Events.prototype.applyEventFormat = function () {
            var _this = this;
            var selectedEvent = this.dialogSettings.events.filter(function (item) { return item.name === _this.dialogSettings.selectedEvent; }), oneEvent = selectedEvent[0], bgr = oneEvent[&quot;backgroundColor&quot;] || this.dialogSettings.defaultBgColor, color = oneEvent[&quot;color&quot;] || this.dialogSettings.defaultColor, message = this.dialogSettings.message || null, note = this.settings.editable &amp;&amp; this.dialogSettings.personalNote ? this.dialogSettings.personalNote : null, eventRange = Calendar.Helpers.ArrayRange(this.indexes.start, this.indexes.end);
            eventRange.forEach(function (item) {
                var cell = $(&#x27;td.cell[data-year-day=&#x27; + item + &#x27;]&#x27;);
                cell.addClass(&#x27;event-day&#x27;);
                cell.css({ &quot;background-color&quot;: bgr, &quot;color&quot;: color });
                if (message || note) {
                    Calendar.Popover.popover(cell, message, note);
                }
            });
        };
        /**
         * Removes css styling and attribute &#x60;title&#x60; from selected cells.
         *
         * @method removeEventFormat
         */
        Events.prototype.removeEventFormat = function () {
            var eventRange = Calendar.Helpers.ArrayRange(this.indexes.start, this.indexes.end);
            eventRange.forEach(function (item) {
                var cell = $(&#x27;td.cell[data-year-day=&#x27; + item + &#x27;]&#x27;);
                cell.css({ &quot;background-color&quot;: &quot;&quot;, &quot;color&quot;: &quot;&quot; });
            });
        };
        /**
         * Resolves left mouse pressing.
         *
         * @method leftMousePressed
         * @private
         * @param {JQueryEventObject} e - Event handler object
         */
        Events.prototype.leftMousePressed = function (e) {
            var event = window.event;
            var button = e.which || event.button;
            return button === 1;
        };
        /**
         * Remove values from &#x60;this.index&#x60; property after &#x60;mouseup&#x60; event
         * to use for other selection.
         *
         * @method resetIndexes
         * @private
         */
        Events.prototype.resetIndexes = function () {
            this.indexes = { start: null, end: null };
        };
        return Events;
    })();
    Calendar.Events = Events;
})(Calendar || (Calendar = {}));
/**
 * Created by Marcela on 28. 4. 2015.
 */
///&lt;reference path=&quot;../typing/jquery.d.ts&quot; /&gt;
///&lt;reference path=&quot;common.ts&quot; /&gt;
///&lt;reference path=&quot;header.ts&quot; /&gt;
///&lt;reference path=&quot;months.ts&quot; /&gt;
///&lt;reference path=&quot;events.ts&quot; /&gt;
/**
 * Vacation calendar plugin.
 *
 * @module Calendar
 */
var Calendar;
(function (Calendar) {
    /**
     * Provides the base plugin class and initializes all components.
     *
     * @class EventCalendar
     * @constructor
     * @param {JQuery} element - DOM element for plugin
     * @param {ISettings} options - Custom options
     * @property {JQuery} element - DOM element for plugin
     * @property {ISettings} settings - Default settings
     * @property {CalendarEvents} events - Calendar events
     * @property {number} year - Actual year of calendar
     */
    var EventCalendar = (function () {
        function EventCalendar(element, options) {
            var _this = this;
            this.settings = {
                events: [{ name: &quot;Default&quot; }],
                editable: true
            };
            this.element = element;
            this.year = new Date().getFullYear();
            this.settings = $.extend(true, this.settings, options);
            if (this.settings.locale) {
                moment.locale(this.settings.locale);
            }
            this.events = new Calendar.Events(this.element, this.settings);
            this.events.setSelectedlYear(this.year);
            this.element.on(&quot;click&quot;, &quot;.year-direction&quot;, function (e) { return _this.changeYear(e); });
        }
        /**
         * Initializes view with calendars.
         *
         * @method init
         */
        EventCalendar.prototype.init = function () {
            //console.log(this.settings);
            this.element.empty();
            var header = new Calendar.Header(this.year), monthTables = new Calendar.MonthCalendar(this.settings, this.year);
            var wrapper = $(&quot;&lt;div /&gt;&quot;).addClass(&quot;calendar-wrapper&quot;).append(header.element).append(monthTables.element);
            wrapper.appendTo(this.element);
        };
        /**
         * Changes the year of calendar and calls rerendering calendar view
         *
         * @method changeYear
         * @param {JQueryEventObject} e - Button object handler
         */
        EventCalendar.prototype.changeYear = function (e) {
            var direction = $(e.target).closest(&quot;.year-direction&quot;).attr(&quot;data-direction&quot;);
            this.year = direction === &quot;prev&quot; ? this.year - 1 : this.year + 1;
            this.init();
            this.events.setSelectedlYear(this.year);
        };
        return EventCalendar;
    })();
    Calendar.EventCalendar = EventCalendar;
})(Calendar || (Calendar = {}));
(function ($) {
    $.fn.vacationCalendar = function () {
        var option = arguments[0], args = arguments;
        return this.each(function () {
            var $this = $(this), data = $this.data(&quot;jquery.vacation.calendar&quot;), options = $.extend({}, $.fn.vacationCalendar.defaults, $this.data(), typeof option === &#x27;object&#x27; &amp;&amp; option);
            if (!data) {
                $this.data(&quot;jquery.vacation.calendar&quot;, (data = new Calendar.EventCalendar($this, options)));
            }
            if (typeof option === &#x27;string&#x27;) {
                data[option](args[1]);
            }
            else {
                data.init();
            }
        });
    };
    $.fn.vacationCalendar.defaults = {};
})(jQuery);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
